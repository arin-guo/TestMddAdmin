<!DOCTYPE html>
<html>
<include file="public:header" />
<link href="__HPLUS__/css/dialog.css" rel="stylesheet">
<link href="__HPLUS__/css/plugins/validform/validform.css" rel="stylesheet">
<link href="__HPLUS__/js/plugins/uploadImg/upload.css" rel="stylesheet">
<link href="__HPLUS__/js/plugins/fancybox/jquery.fancybox.css" rel="stylesheet">
<style>
	.form-control{ padding-left:5px;}
	.form-group label{
		line-height: 2.5;
	}
</style>
  <body>
	  <div class="wrapper wrapper-content animated fadeInRight">
		<form role="form" class="form" action="__URL__/update">
			<input type="hidden" name="id" value="<{$vo.id}>">
			<div class="form-group">
				<label class="col-sm-2 control-label">学生姓名：</label>
				<div class="col-sm-10">
					<input type="text" datatype="*" name="realname" class="form-control" placeholder="学生姓名" value="<{$vo.realname}>">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">英文名(选填)：</label>
				<div class="col-sm-10">
					<input type="text" name="en_name" class="form-control" placeholder="英文名" value="<{$vo.en_name}>">
				</div>
			</div>
			<div class="clearfix"></div><br>
			<div class="form-group">
				<label class="col-sm-2 control-label">学号：</label>
				<div class="col-sm-10">
					<input type="text" name="code" datatype="*" class="form-control" placeholder="请输入学号" ajaxurl="__URL__/checkValue?type=1&id=<{$vo.id}>" value="<{$vo.code}>">
				</div>
			</div>
			<div class="clearfix"></div>
			<div class="form-group">
				<label class="col-sm-2 control-label">身份证(选填)：</label>
				<div class="col-sm-10">
					<input type="text" datatype="/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/" ignore="ignore" name="id_card" errormsg="身份证格式不正确" class="form-control" placeholder="身份证号码" ajaxurl="__URL__/checkValue?type=1&id=<{$vo.id}>" value="<{$vo.id_card}>">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">性别：</label>
				<div class="col-sm-10">
					<select name="sex" class="form-control" datatype="*">
						<option value="">请选择</option>
							<option value="1" <if condition="$vo.sex eq 1"> selected</if> >男</option>
							<option value="2" <if condition="$vo.sex eq 2"> selected</if> >女</option>
					</select>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label">生日：</label>
				<div class="col-sm-10">
					<input type="date" name="birthday" datatype="*" class="form-control"  placeholder="输入年月日" value="<{$vo.birthday}>">
				</div>
			</div>
			<div class="clearfix"></div><br>
			<div class="form-group">
				<label class="col-sm-2 control-label">年龄：</label>
				<div class="col-sm-10">
					<input type="text" name="age" datatype="*" class="form-control"  placeholder="输入年龄" value="<{$vo.age}>">
				</div>
			</div>
			<div class="clearfix"></div><br>
			<div class="form-group">
				<label class="col-sm-2 control-label">户籍(选填)：</label>
				<div class="col-sm-10">
					<input type="text" name="household" class="form-control"  placeholder="输入户籍所在地" value="<{$vo.household}>">
				</div>
			</div>
			<div class="clearfix"></div><br>
			<div class="form-group">
				<label class="col-sm-2 control-label">民族(选填)：</label>
				<div class="col-sm-10">
					<input type="text" name="ethnicity" class="form-control"  placeholder="输入民族" value="<{$vo.ethnicity}>">
				</div>
			</div>
			<div class="clearfix"></div><br>
			<div class="form-group">
				<label class="col-sm-2 control-label">爱好(选填)：</label>
				<div class="col-sm-10">
					<input type="text" name="hobby" class="form-control"  placeholder="输入爱好" value="<{$vo.hobby}>">
				</div>
			</div>
			<div class="clearfix"></div><br>
			<div class="form-group">
				<label class="col-sm-2 control-label">身体特殊状况(选填)：</label>
				<div class="col-sm-10">
					<input type="text" name="body_situation" class="form-control"  placeholder="身体特殊情况" value="<{$vo.body_situation}>">
				</div>
			</div>
			<div class="clearfix"></div><br>
			<div class="form-group">
				<label class="col-sm-2 control-label">过敏情况(选填)：</label>
				<div class="col-sm-10">
					<input type="text" name="allergy_situation" class="form-control"  placeholder="过敏情况" value="<{$vo.allergy_situation}>">
				</div>
			</div>
			<div class="clearfix"></div><br/>
			<div class="form-group">
				<label class="col-sm-2 control-label">头像：</label>
				<div class="col-sm-10">
					<div class="file-up"  data-num="1">
						<input id="photo" name="photo" value="<{$vo.photo}>" type="hidden" />
						<section class="file-box">
							<img src="__HPLUS__/js/plugins/uploadImg/img/choose.png" class="add-img">
							<button type="button" onclick="doUpload(this)" class="file"></button>
						 </section>
					</div>
				</div>
			</div>
			<div class="clearfix"></div><br>
			<div class="clearfix">
				<button type="submit" id="submit" class="btn btn-success btn-block">提交</button>
				<button type="reset" id="reset2" class="hidden btn btn-success btn-block">重置</button>
			</div>
		</form>
	  </div>
  </body>
<!-- 全局js -->
<include file="public:foot" />
<script src="__HPLUS__/js/plugins/validform/Validform_v5.3.2_min.js"></script>
<script src="__HPLUS__/js/jquery.md5.js"></script>
<script type="text/javascript" src="__HPLUS__/js/plugins/uploadImg/jquery.upload.js"></script>
<script src="__HPLUS__/js/plugins/fancybox/jquery.fancybox.js"></script>
<script>
$(document).ready(function () {
	//大图展示
	$(".fancybox").fancybox({openEffect:"none",closeEffect:"none"});
	//图片回显
	var imgSrc = $(".file-up").find("input[type='hidden']").val();
	if(imgSrc != ""){
		imgSrc = imgSrc.split("|");
		for(var i = 0;i < imgSrc.length;i++){
			$.appendImg($(".file-up").find("button"),imgSrc[i]);
		}
		//图片独立服务器追加表头
		$(".file-box img.up-img").each(function(){
			var src = "__IMGROOT__"+$(this).attr("src");
			console.log(src);
			$(this).attr("src",src);
		})
	}
})
function doUpload(t) {
	$.upload({
        url: '__URL__/uploadImg', 
        fileName: 'image', 
        dataType: 'json',
        acceptType:'image/jpeg,image/png',
        onSend: function() {
                return true;
        },
        // 上传之后回调
        onComplate: function(data) {
        	if(data.status == 1){
        		var url =data.data;
        		$.appendImg(t,url);
        		//图片独立服务器追加表头
        		$(".file-box img.up-img").each(function(){
        			var src = "__IMGROOT__"+$(this).attr("src");
        			$(this).attr("src",src);
        		})
        	}else{
        		layer.alert(data.info);
        	}
        }
	});
}
$(function(){
	
	$("#reset2").click();
	var index = parent.layer.getFrameIndex(window.name);
	var form = $(".form").Validform({
		tiptype:4,
		ajaxPost:true,
		callback:function(data){
			if(data.status == 1) {
				window.parent.layer.msg(data.info);
				window.parent.$('#table_list').trigger("reloadGrid");
				parent.layer.close(index);
			}else{
				window.parent.layer.msg(data.info);
			}
		}
	});
})
</script>
</html>